#!/bin/bash

/usr/bin/env \
	PATH=$(echo "$CROSSPI_TOOLCHAIN/bin:$CROSSPI_HOST_DIR/bin:$CROSSPI_HOST_DIR/usr/bin:$CROSSPI_HOST_DIR/usr/local/bin:$PATH" | sed 's/:$//') \
	LD_LIBRARY_PATH=$(echo "$CROSSPI_HOST_DIR/lib:$CROSSPI_HOST_DIR/usr/lib:$CROSSPI_HOST_DIR/usr/local/lib:$LD_LIBRARY_PATH" | sed 's/:$//') \
	\
	CC=$CROSSPI_HOST-gcc \
	CXX=$CROSSPI_HOST-g++ \
	AR=$CROSSPI_HOST-ar \
	RANLIB=$CROSSPI_HOST-ranlib \
	LD=$CROSSPI_HOST-ld \
	AS=$CROSSPI_HOST-as \
	NM=$CROSSPI_HOST-nm \
	LDD=$CROSSPI_HOST-ldd \
	STRIP=$CROSSPI_HOST-strip \
	\
	PKG_CONFIG_LIBDIR="$CROSSPI_SYSROOT_DIR/usr/lib/pkgconfig,$CROSSPI_TARGET_DIR/usr/lib/pkgconfig" \
	PKG_CONFIG_PATH="$CROSSPI_SYSROOT_DIR/lib/pkgconfig,$CROSSPI_TARGET_DIR/lib/pkgconfig" \
	ACLOCAL_FLAGS="-I $CROSSPI_SYSROOT_DIR/usr/share/aclocal -I $CROSSPI_TARGET_DIR/usr/share/aclocal" \
	CPPFLAGS="--sysroot=$CROSSPI_SYSROOT_DIR -I$CROSSPI_TARGET_DIR/usr/include" \
	LDFLAGS="--sysroot=$CROSSPI_SYSROOT_DIR -L$CROSSPI_TARGET_DIR/lib -L$CROSSPI_TARGET_DIR/usr/lib" \
	\
	SYSROOT=$CROSSPI_SYSROOT_DIR \
	HOST=$CROSSPI_HOST \
	TARGET=$CROSSPI_TARGET \
	CROSS_COMPILE=${CROSSPI_HOST}- \
	CROSS=${CROSSPI_HOST}- \
	DESTDIR=$CROSSPI_TARGET_DIR \
	\
	/bin/bash --noprofile --rcfile $CROSSPI_HOME/shells/$CROSSPI_SHELL/bashrc +h $@
