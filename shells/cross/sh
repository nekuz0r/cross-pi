#!/bin/bash

/usr/bin/env \
	PATH=$(echo "$CROSSPI_TOOLCHAIN/bin:$CROSSPI_HOST_DIR/bin:$CROSSPI_HOST_DIR/usr/bin:$CROSSPI_HOST_DIR/usr/local/bin:$PATH" | sed 's/:$//') \
	LD_LIBRARY_PATH=$(echo "$CROSSPI_HOST_DIR/lib:$CROSSPI_HOST_DIR/usr/lib:$CROSSPI_HOST_DIR/usr/local/lib:$LD_LIBRARY_PATH" | sed 's/:$//') \
	\
	CC=$CROSSPI_HOST-gcc \
	CXX=$CROSSPI_HOST-g++ \
	AR=$CROSSPI_HOST-ar \
	RANLIB=$CROSSPI_HOST-ranlib \
	LD=$CROSSPI_HOST-ld \
	AS=$CROSSPI_HOST-as \
	NM=$CROSSPI_HOST-nm \
	LDD=$CROSSPI_HOST-ldd \
	STRIP=$CROSSPI_HOST-strip \
	\
	PKG_CONFIG=$CROSSPI_HOST_DIR/usr/bin/pkg-config \
	PKG_CONFIG_SYSROOT_DIR=$CROSSPI_TARGET_DIR \
	PKG_CONFIG_PATH="$CROSSPI_TARGET_DIR/lib/pkgconfig:$CROSSPI_TARGET_DIR/usr/lib/pkgconfig:$CROSSPI_TARGET_DIR/usr/local/lib/pkgconfig" \
	PKG_CONFIG_ALLOW_SYSTEM_CFLAGS=y \
	PKG_CONFIG_ALLOW_SYSTEM_LIBS=y \
	ACLOCAL_FLAGS="-I $CROSSPI_TARGET_DIR/usr/share/aclocal" \
	\
	HOST=$CROSSPI_HOST \
	TARGET=$CROSSPI_TARGET \
	CROSS_COMPILE=${CROSSPI_HOST}- \
	CROSS=${CROSSPI_HOST}- \
	DESTDIR=$CROSSPI_TARGET_DIR \
	\
	/bin/bash --noprofile --rcfile $CROSSPI_HOME/shells/$CROSSPI_SHELL/bashrc +h $@
